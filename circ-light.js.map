{"version":3,"sources":["/Users/coryhall/Code/FL/anonymous.club/libs/ui/src/lib/world-environment/CirculatingLight.tsx"],"names":["TICK_FORWARD","TICK_BACKWARD","CirculatingLight","shouldStop","center","cX","cY","cZ","axis","aX","aY","aZ","radius","period","freq","offset","props","ref","useRef","sR","time","useSpring","config","tension","friction","position","api","x","y","z","useFrame","clock","tD","get","start","immediate","set","r","t","Math","sin","cos"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;;AAYA,MAAMA,YAAY,GAAG,IAAI,EAAzB;AACA,MAAMC,aAAa,GAAG,EAAE,IAAI,GAAN,CAAtB;AACO,SAASC,gBAAT,OASmB;AAAA,MATO;AAC/BC,cAAU,GAAG,KADkB;AAE/BC,UAAM,EAAE,CAACC,EAAD,EAAKC,EAAL,EAASC,EAAT,IAAe,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAFQ;AAG/BC,QAAI,EAAE,CAACC,EAAD,EAAKC,EAAL,EAASC,EAAT,IAAe,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAHU;AAI/BC,UAAM,GAAG,GAJsB;AAK/BC,UAAM,GAAG,EALsB;AAM/BC,QAAI,GAAG,IAAID,MANoB;AAO/BE,UAAM,GAAG;AAPsB,GASP;AAAA,MADrBC,KACqB;;AACxB,QAAMC,GAAG,GAAGC,oDAAM,EAAlB;AACA,QAAM;AAAEC,MAAF;AAAMC;AAAN,MAAeC,qEAAS,CAAC;AAAEF,MAAE,EAAEP,MAAN;AAAcQ,QAAI,EAAEL,MAApB;AAA4BO,UAAM,EAAE;AAAEC,aAAO,EAAE,EAAX;AAAeC,cAAQ,EAAE;AAAzB;AAApC,GAAD,CAA9B;AACA,QAAM,CAACC,QAAD,EAAWC,GAAX,IAAkBL,qEAAS,CAAC,OAAO;AACvCM,KAAC,EAAEtB,EAAE,GAAGO,MAAM,GAAGH,EADsB;AAEvCmB,KAAC,EAAEtB,EAAE,GAAGM,MAAM,GAAGF,EAFsB;AAGvCmB,KAAC,EAAEtB,EAAE,GAAGK,MAAM,GAAGD;AAHsB,GAAP,CAAD,CAAjC;AAKAmB,qEAAQ,CAAC,CAAC;AAAEC;AAAF,GAAD,KAAe;AACtB,UAAMC,EAAE,GAAGZ,IAAI,CAACa,GAAL,EAAX;;AACA,QAAI9B,UAAJ,EAAgB;AACd;AACAiB,UAAI,CAACc,KAAL,CAAWF,EAAE,GAAG/B,aAAhB,EAA+B;AAAEkC,iBAAS,EAAE;AAAb,OAA/B;AACD,KAHD,MAGO;AACLf,UAAI,CAACgB,GAAL,CAASJ,EAAE,GAAGhC,YAAd;AACD;;AACD,UAAMqC,CAAC,GAAGlB,EAAE,CAACc,GAAH,EAAV;AACA,UAAMK,CAAC,GAAGvB,MAAM,GAAGiB,EAAE,GAAGlB,IAAxB;AACAY,OAAG,CAACU,GAAJ,CAAQ;AACNP,OAAC,EAAEtB,EAAE,GAAGgC,IAAI,CAACC,GAAL,CAASF,CAAT,IAAcD,CAAd,GAAkB1B,EADpB;AAENgB,OAAC,EAAEtB,EAAE,GAAGkC,IAAI,CAACE,GAAL,CAASH,CAAT,IAAcD,CAAd,GAAkB5B,EAFpB;AAGNmB,OAAC,EAAEtB,EAAE,GAAGiC,IAAI,CAACC,GAAL,CAASF,CAAT,IAAcD,CAAd,GAAkB3B;AAHpB,KAAR;AAKD,GAfO,CAAR;AAgBA,sBACE,qEAAC,4DAAD,CAAU,UAAV;AACE,cAAU,MADZ;AAEE,aAAS,EAAE,CAFb;AAGE,mBAAa,CAAC,OAHhB;AAIE,6BAAuB,IAJzB;AAKE,4BAAsB;AALxB,KAMMM,KANN;AAOE,kBAAYS,QAAQ,CAACE,CAPvB;AAQE,kBAAYF,QAAQ,CAACG,CARvB;AASE,kBAAYH,QAAQ,CAACI,CATvB;AAUE,OAAG,EAAEZ;AAVP;AAAA;AAAA;AAAA;AAAA,UADF;AAcD,C","file":"circ-light.js","sourcesContent":["import { PointLightProps, useFrame } from '@react-three/fiber';\nimport { useRef } from 'react';\nimport { useSpring, animated } from '@react-spring/three';\nimport { Vector3Array } from '@anonymous.club/types';\n\ntype CirculatingLightProps = {\n  shouldStop?: boolean;\n  center: Vector3Array;\n  axis: Vector3Array;\n  radius: number;\n  offset?: number;\n  period?: number;\n  freq: number;\n} & PointLightProps;\nconst TICK_FORWARD = 1 / 30;\nconst TICK_BACKWARD = -(1 / 180);\nexport function CirculatingLight({\n  shouldStop = false,\n  center: [cX, cY, cZ] = [0, 0, 0],\n  axis: [aX, aY, aZ] = [1, 0, 1],\n  radius = 100,\n  period = 30,\n  freq = 1 / period,\n  offset = 0,\n  ...props\n}: CirculatingLightProps) {\n  const ref = useRef();\n  const { sR, time } = useSpring({ sR: radius, time: offset, config: { tension: 20, friction: 190 } });\n  const [position, api] = useSpring(() => ({\n    x: cX + radius * aX,\n    y: cY + radius * aY,\n    z: cZ + radius * aZ,\n  }));\n  useFrame(({ clock }) => {\n    const tD = time.get();\n    if (shouldStop) {\n      // sR.start(radius * 2);\n      time.start(tD + TICK_BACKWARD, { immediate: true });\n    } else {\n      time.set(tD + TICK_FORWARD);\n    }\n    const r = sR.get();\n    const t = offset + tD * freq;\n    api.set({\n      z: cZ + Math.sin(t) * r * aZ,\n      x: cX + Math.cos(t) * r * aX,\n      y: cY + Math.sin(t) * r * aY,\n    });\n  });\n  return (\n    <animated.pointLight\n      castShadow\n      intensity={4}\n      shadow-bias={-0.00002}\n      shadow-mapSize-height={2048}\n      shadow-mapSize-width={2048}\n      {...props}\n      position-x={position.x}\n      position-y={position.y}\n      position-z={position.z}\n      ref={ref}\n      />\n  );\n}\n"],"sourceRoot":"webpack:///"}